<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/franklindocs/libs/highlight/github.min.css"> <link rel=stylesheet  href="/franklindocs/css/jtd.css"> <link rel=icon  href="/franklindocs/assets/infra/logoF_square.gif"> <title>Working with Franklin</title> <script src="/franklindocs/libs/lunr/lunr.min.js"></script> <script src="/franklindocs/libs/lunr/lunr_index.js"></script> <script src="/franklindocs/libs/lunr/lunrclient.min.js"></script> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/franklindocs/" class=title > <img style="height:60px;" src="/franklindocs/assets/infra/franklin.svg" alt=franklin  /> <style> @media (max-width: 31.25rem){ .side-bar .show-menu {height:30px;} } @media (max-width: 50rem) { .side-bar .header .title {padding-top:0; padding-bottom: 0;} .header .title img {height:60px; max-width: 100px !important;} } @media (min-width: 66.5rem){ .header .title img {max-width: 140px !important;} } </style> </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item "><a href="/franklindocs/" class=menu-list-link >• Home</a> <li class="menu-list-item active"><a href="/franklindocs/workflow/" class=menu-list-link >• Workflow</a> <li class="menu-list-parent "><a href="/franklindocs/syntax/markdown/" class=menu-list-link >• Syntax</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/franklindocs/syntax/markdown/" class=menu-list-link >Markdown</a> <li class="menu-list-item "><a href="/franklindocs/syntax/divs-commands/" class=menu-list-link >Divs and Commands</a> <li class="menu-list-item "><a href="/franklindocs/syntax/page-variables/" class=menu-list-link >Page Variables</a> </ul> <li class="menu-list-parent "><a href="/franklindocs/styling/templates/" class=menu-list-link >• Styling</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/franklindocs/styling/templates/" class=menu-list-link >Templates</a> <li class="menu-list-item "><a href="/franklindocs/styling/classes/" class=menu-list-link >Classes</a> </ul> <li class="menu-list-parent "><a href="/franklindocs/code/" class=menu-list-link >• Code</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/franklindocs/code/" class=menu-list-link >Inserting code</a> <li class="menu-list-item "><a href="/franklindocs/code/eval-tricks/" class=menu-list-link >Code tricks</a> <li class="menu-list-item "><a href="/franklindocs/code/literate/" class=menu-list-link >Literate.jl</a> </ul> <li class="menu-list-parent "><a href="/franklindocs/extras/" class=menu-list-link >• Extras</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/franklindocs/extras/" class=menu-list-link >Extras</a> <li class="menu-list-item "><a href="/franklindocs/extras/lunr/" class=menu-list-link >Lunr search</a> <li class="menu-list-item "><a href="/franklindocs/extras/literate/" class=menu-list-link >Literate</a> <li class="menu-list-item "><a href="/franklindocs/extras/plotly/" class=menu-list-link >Plotly</a> </ul> <li class="menu-list-parent "><a href="/franklindocs/faq/technical/" class=menu-list-link >• FAQ</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/franklindocs/faq/technical/" class=menu-list-link >Technical</a> <li class="menu-list-item "><a href="/franklindocs/faq/troubleshooting/" class=menu-list-link >Troubleshooting</a> <li class="menu-list-item "><a href="/franklindocs/faq/why-o-why/" class=menu-list-link >Meta</a> </ul> </ul> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder="Enter search term" type=text > <input type=submit  value=Search  formaction="/franklindocs/search/index.html"> </form> </div> <div class=footer > <a href="/franklindocs/faq/why-o-why/"><img style="width:40%;padding-left:10px;margin-bottom:15px;" src="/franklindocs/assets/infra/logoF2.svg" alt="Franklin Logo" /></a> </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a name=pagetop ></a> <a id=github  href="https://github.com/tlienart/Franklin.jl">GitHub Repository</a> </div> <div class=franklin-content > <h1 id=working_with_franklin ><a href="/franklindocs/workflow/index.html#working_with_franklin">Working with Franklin</a></h1> <span style="font-size:24px;font-weight:300;">Set things up in minutes and focus on writing great content.</span> <div class=blank ></div> <div class=franklin-toc ><ol><li><a href="/franklindocs/workflow/index.html#creating_your_website">Creating your website</a><ol><li><a href="/franklindocs/workflow/index.html#folder_structure">Folder structure</a><li><a href="/franklindocs/workflow/index.html#top_folder">Top folder</a><li><a href="/franklindocs/workflow/index.html#reserved_names">Reserved names</a><li><a href="/franklindocs/workflow/index.html#editing_and_testing_your_website">Editing and testing your website</a><li><a href="/franklindocs/workflow/index.html#verifying_links">Verifying links</a></ol><li><a href="/franklindocs/workflow/index.html#deploying_your_website">Deploying your website</a><ol><li><a href="/franklindocs/workflow/index.html#setting_up">Setting up</a><li><a href="/franklindocs/workflow/index.html#setting_up_access_tokens_on_github">Setting up access tokens on GitHub</a><li><a href="/franklindocs/workflow/index.html#updating_your_website">Updating your website</a><li><a href="/franklindocs/workflow/index.html#verification">Verification</a><li><a href="/franklindocs/workflow/index.html#optimisation_step">Optimisation step</a><li><a href="/franklindocs/workflow/index.html#post-processing">Post-processing</a></ol><li><a href="/franklindocs/workflow/index.html#summary">Summary</a><ol><li><a href="/franklindocs/workflow/index.html#other_providers">Other providers</a></ol></ol></div> <h2 id=creating_your_website ><a href="/franklindocs/workflow/index.html#creating_your_website">Creating your website</a></h2> <p>To get started, the easiest is to use the <code>newsite</code> function to generate a website folder which you can then modify to your heart&#39;s content. The command takes one mandatory argument: the <em>name</em> of the folder. You can optionally specify a template:</p> <pre><code class=language-julia-repl >julia> newsite("TestWebsite"; template="vela")
✓ Website folder generated at "TestWebsite" (now the current directory).
→ Use serve() from Franklin to see the website in your browser.</code></pre> <p>There are a number of <a href="https://tlienart.github.io/FranklinTemplates.jl/">simple templates</a> you can choose from and tweak.</p> <div class=note ><div class=title >⚠ Note</div> <div class=content >The templates are meant to be used as <em>starting points</em> and will likely require some fixes to match what you want. Your help to make them better is very welcome.</div></div> <p>Once you have created a new website folder, you can start the live-rendering of your website with</p> <pre><code class=language-julia-repl >julia> serve()
→ Initial full pass...
→ Starting the server...
✓ LiveServer listening on http://localhost:8000/ ...
  (use CTRL+C to shut down)</code></pre> <p>and navigate in a browser to the corresponding address to preview the website.</p> <h3 id=folder_structure ><a href="/franklindocs/workflow/index.html#folder_structure">Folder structure</a></h3> <p>The initial call to <code>newsite</code> generates a folder with the following structure:</p> <pre><code class=language-plaintext >.
├── _assets/
├── _layout/
├── _libs/
├── _layout/
├── config.md
└── index.md</code></pre> <p>After running <code>serve</code> the first time, an additional folder is generated: <code>__site</code> which will contain your full generated website. Among these folders:</p> <div class=tlist ><ul> <li><p>the files in the top folder such as <code>index.md</code> are the source files for the generated pages, you must have an <code>index.md</code> or <code>index.html</code> at the top level but can then use whatever folder structure you want &#40;see further&#41;,</p> <li><p>you should <strong>not</strong> modify the content of <code>__site</code> as it&#39;s <em>generated</em> and any changes you do in there may be silently over-written whenever you modify files elsewhere,</p> <li><p>the folders <code>_assets/</code>, <code>_libs/</code>, <code>_layout</code> and <code>_css</code> contain <em>auxiliary files</em> supporting your site:</p> <ul> <li><p><code>_assets/</code> will contain images, code snippets, etc.,</p> <li><p><code>_css/</code> will contain the style sheets,</p> <li><p><code>_libs/</code> will contain javascript libraries,</p> <li><p><code>_layout/</code> will contain bits of HTML scaffolding for the generated pages,</p> </ul> </ul> </div> <h3 id=top_folder ><a href="/franklindocs/workflow/index.html#top_folder">Top folder</a></h3> <p>In this folder,</p> <div class=tlist ><ul> <li><p><code>index.md</code> will generate the site&#39;s landing page,</p> <li><p><code>pages/page1.md</code> would correspond to pages on your website &#40;you can have whatever subfolder structure you want in here&#41;,</p> <li><p><code>config.md</code> allows to specify variables that help steer the page generation, you can also use it to declare global variables or definitions that can then be used on all pages.</p> </ul> </div> <div class=note ><div class=title >⚠ Note</div> <div class=content >You can also write pages in plain HTML. For instance you may want to write an <code>index.html</code> file instead of generating it via the <code>index.md</code>. You will still need to put it at the exact same place and let Franklin copy the files appropriately.</div></div> <p>Note that Franklin generates a folder structure in <code>__site</code> which allows to have URLs like <code>&#91;website&#93;/page1/</code>. The following rules are applied:</p> <ul> <li><p>the filename is <code>&#91;path/&#93;index.md</code> or <code>&#91;path/&#93;index.html</code>, it will be copied over &quot;as is&quot; to <code>__site/&#91;path/&#93;index.html</code>,</p> <li><p>the filename is <code>&#91;path/&#93;somepage.md</code> or <code>&#91;path/&#93;somepage.html</code>, it will be copied to <code>__site/&#91;path/&#93;somepage/index.html</code>.</p> </ul> <p>So for instance if we ignore auxiliary files and you have</p> <pre><code class=language-julia >.
├── index.md
├── folder
│   └── subpage.md
└── page.md</code></pre> <p>it will lead to</p> <pre><code class=language-julia >__site
  ├── index.html
  ├── folder
  │   └── subpage
  │       └── index.html
  └── page
      └── index.html</code></pre> <p>which allows to have the following URLs:</p> <div class=tlist ><ul> <li><p><code>&#91;website&#93;/</code></p> <li><p><code>&#91;website&#93;/page/</code></p> <li><p><code>&#91;website&#93;/folder/subpage/</code></p> </ul> </div> <h3 id=reserved_names ><a href="/franklindocs/workflow/index.html#reserved_names">Reserved names</a></h3> <p>To avoid name clashes, refrain from using the following paths where <code>/</code> indicates the topdir &#40;website folder&#41;:</p> <div class=tlist ><ul> <li><p><code>/css/</code> or <code>/css.md</code></p> <li><p><code>/layout/</code> or <code>/layout.md</code></p> <li><p><code>/literate/</code> or <code>/literate.md</code></p> </ul> </div> <p>Also bear in mind that Franklin will ignore <code>README.md</code>, <code>LICENSE.md</code>, <code>Manifest.toml</code> and <code>Project.toml</code>.</p> <h3 id=editing_and_testing_your_website ><a href="/franklindocs/workflow/index.html#editing_and_testing_your_website">Editing and testing your website</a></h3> <p>The <code>serve</code> function can be used to launch a server which will track and render modifications. There are a few useful options you can use beyond the barebone <code>serve&#40;&#41;</code>, do <code>?serve</code> in your REPL for all options, we list a few noteworthy one below:</p> <div class=tlist ><ul> <li><p><code>clear&#61;true</code>, erases <code>__site</code> and starts from a blank slate,</p> <li><p><code>single&#61;false</code>, if set to <code>true</code>, does a single build pass generating all pages and does not start the server.</p> <li><p><code>prerender&#61;false</code>, if set to <code>true</code>, will prerender code blocks and maths &#40;see the <a href="#optimisation_step">optimisation step</a>&#41;</p> <li><p><code>verb&#61;false</code>, whether to show information about which page is being processed etc,</p> <li><p><code>silent&#61;false</code>, if set to <code>true</code>, will suppress any informative messages that could otherwise appear in your console when editing your site, this goes one step further than <code>verb&#61;false</code> as it also applies for code evaluation,</p> <li><p><code>eval_all&#61;false</code>, if set to <code>true</code>, will re-evaluate all code blocks on all pages.</p> </ul> </div> <h3 id=verifying_links ><a href="/franklindocs/workflow/index.html#verifying_links">Verifying links</a></h3> <p>Before deploying you may want to verify that links on your website lead somewhere, to do so use the <code>verify_links&#40;&#41;</code>. It will take a few second to verify all links on every generated pages but can be quite helpful to identify dead links or links with typos.</p> <h2 id=deploying_your_website ><a href="/franklindocs/workflow/index.html#deploying_your_website">Deploying your website</a></h2> <p>In this section we&#39;ll assume that you want to host your website on GitHub or GitLab, either on a personal page or a project page. If you&#39;re using your own hosting server, you just need to copy/clone the content of <code>__site</code> there.</p> <p>Services like Netlify also provide an easy setup to link to a repo that contains your website.</p> <h3 id=setting_up ><a href="/franklindocs/workflow/index.html#setting_up">Setting up</a></h3> <p>If you haven&#39;t done so already, you need to make your website folder a git repository and link it with either a GitHub or GitLab repository; the steps below need to be done only once.</p> <div class=tlist ><ol> <li><p>Create an empty repo on Git*; if you want a personal page you will need to specify <code>username.github.io</code> or <code>username.gitlab.io</code> as the repo name &#40;see <a href="https://pages.github.com/">here for github</a>, <a href="https://about.gitlab.com/stages-devops-lifecycle/pages/">here for gitlab</a>&#41;.</p> <li><p>&#40;GitHub only&#41; set up secrets &#40;see next point&#41;</p> <li><p>In your local folder do</p> </ol> <ul> <li><p><code>git init &amp;&amp; git add -A &amp;&amp; git commit -am &quot;initial files&quot;</code></p> <li><p><code>git remote add origin https://URL_TO_YOUR_REPO</code></p> <li><p><code>git push -u origin master</code></p> </ul> </div> <p>and... that&#39;s it. The <code>newsite</code> command that you will have used initially also generated CI files for both GitHub and GitLab that, when pushed, will trigger a page deploy. In a few minutes your site will be online.</p> <h3 id=setting_up_access_tokens_on_github ><a href="/franklindocs/workflow/index.html#setting_up_access_tokens_on_github">Setting up access tokens on GitHub</a></h3> <p>In order for the deployment action to work on GitHub, you need to set up an access token on GitHub. The steps are explained below but you <a href="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line">can read more on the topic here</a>.</p> <p>There are two steps: first you need to create the token, then you need to tell your site repo to use it.</p> <p><strong>STEP 1</strong>:</p> <div class=tlist ><ol> <li><p>Go to the <a href="https://github.com/settings/tokens">tokens generation page</a> in your <em>Settings &gt; Developper settings &gt; Personal access tokens</em> and click on <em>Generate new token</em>.</p> <li><p>Name the token <code>FRANKLIN</code> and click on the <code>repo</code> scope; then scroll to the bottom and click on <strong>Generate token</strong>.</p> <li><p>Click on the button to copy the key:</p> </ol> </div> <p><img src="/franklindocs/assets/img/generate_token.png" alt="" /></p> <p><strong>STEP 2</strong>:</p> <div class=tlist ><ul> <li><p>Go to the repository hosting your website and select <em>Settings &gt; Secrets</em> then click on <strong>Add new secret</strong>,</p> <li><p>Name the secret <code>FRANKLIN</code> and copy the key from the previous step. <em>Make sure that no whitespace is introduce before or after the key</em>.</p> </ul> </div> <p><img src="/franklindocs/assets/img/add_secret.png" alt="" /></p> <h3 id=updating_your_website ><a href="/franklindocs/workflow/index.html#updating_your_website">Updating your website</a></h3> <p>You essentially just need to commit and push changes. Franklin also provides a convenient <code>publish</code> function which:</p> <div class=tlist ><ul> <li><p>applies an optional optimisation step &#40;see below&#41;</p> <li><p>does a <code>git add -A; git commit -am &quot;franklin-update&quot;; git push</code></p> </ul> </div> <p>See <code>?publish</code> for more information.</p> <h3 id=verification ><a href="/franklindocs/workflow/index.html#verification">Verification</a></h3> <p>Before publishing, you may also want to verify that all links on your site are valid. For this use the function <code>verify_links</code>:</p> <pre><code class=language-julia-repl >julia> verify_links()
Verifying links... [you seem online ✓]
- internal link issue on page index.md: pub/menu3.html.</code></pre> <p>then after fixing and re-generating pages:</p> <pre><code class=language-julia-repl >julia> verify_links()
All internal and external links verified ✓.</code></pre> <h3 id=optimisation_step ><a href="/franklindocs/workflow/index.html#optimisation_step">Optimisation step</a></h3> <p>The <code>optimize</code> function can <div class=tlist ><ol> <li><p>pre-render KaTeX and highlight.js code to HTML so that the pages don&#39;t have to load these javascript libraries,</p> <li><p>minify all generated HTML and CSS.</p> </ol> </div> See <code>?optimize</code> for options.</p> <p>Those two steps may lead to faster loading pages. Note that in order to run them, you will need a couple of external dependencies as mentioned in the <a href="/franklindocs/index.html#installing_optional_extras">installation section</a>.</p> <h3 id=post-processing ><a href="/franklindocs/workflow/index.html#post-processing">Post-processing</a></h3> <p>The <code>publish</code> function accepts a <code>final&#61;</code> keyword to which you can pass any function <code>&#40;&#41; -&gt; nothing</code> which may do some final post-processing before pushing updates online.</p> <p>For instance you can pass <code>final&#61;lunr</code> where <code>lunr</code> is a function exported by Franklin which generates a Lunr search index &#40;see <a href="http://localhost:8000/pub/extras/lunr.html">this tutorial</a> for more details&#41;.</p> <h2 id=summary ><a href="/franklindocs/workflow/index.html#summary">Summary</a></h2> <div class=tlist ><ol> <li><p>use <code>newsite</code> to generate a website folder,</p> <li><p>use <code>serve</code> to build it and edit it,</p> <li><p>create a repository on GitHub or GitLab, if on GitHub create access tokens as explained earlier,</p> <li><p>initialise your website folder as a git repository and link it to the remote repository &#40;you can use the git commands indicated earlier&#41;,</p> <li><p>when appropriate, use the <code>publish</code> function to push updates and trigger a deployment of the website.</p> </ol> </div> <div class=note ><div class=title >⚠ Note</div> <div class=content >If the site is a <strong>project</strong> site with a root URL of the form <code>&#91;base&#93;/myProject/</code>, make sure to add the line <code>@def prepath &#61; &quot;myProject&quot;</code> in your <code>config.md</code> before using <code>publish</code>.</div></div> <h3 id=other_providers ><a href="/franklindocs/workflow/index.html#other_providers">Other providers</a></h3> <ul> <li><p><strong>Netlify</strong>: just specify <code>__site</code> as the build directory and that&#39;s it.</p> </ul> <div class=note ><div class=title >⚠ Note</div> <div class=content >Help is welcome to complete these instructions</div></div> <div class=page-foot > <div class=copyright > &copy; Thibaut Lienart. Last modified: February 13, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>. </div> </div> </div> </div> </div> </div> <!-- end of class page-wrap--> <script src="/franklindocs/libs/highlight/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: ' '});</script>