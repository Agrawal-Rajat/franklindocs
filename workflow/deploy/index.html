<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/jtd.css"> <link rel=icon  href="/assets/infra/logoF_square.gif"> <title>Deploying your website</title> <script src="/libs/lunr/lunr.min.js"></script> <script src="/libs/lunr/lunr_index.js"></script> <script src="/libs/lunr/lunrclient.min.js"></script> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/" class=title > <img style="height:60px;" src="/assets/infra/franklin.svg" alt=franklin  /> <style> @media (max-width: 31.25rem){ .side-bar .show-menu {height:30px;} } @media (max-width: 50rem) { .side-bar .header .title {padding-top:0; padding-bottom: 0;} .header .title img {height:60px; max-width: 100px !important;} } @media (min-width: 66.5rem){ .header .title img {max-width: 140px !important;} } </style> </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item "><a href="/" class=menu-list-link >• Home</a> <li class="menu-list-parent active"><a href="/workflow/" class=menu-list-link >• Workflow</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/workflow/" class=menu-list-link >Create and edit</a> <li class="menu-list-item active"><a href="/workflow/deploy/" class=menu-list-link >Deploy</a> </ul> <li class="menu-list-parent "><a href="/syntax/markdown/" class=menu-list-link >• Syntax</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/syntax/markdown/" class=menu-list-link >Markdown</a> <li class="menu-list-item "><a href="/syntax/divs-commands/" class=menu-list-link >Divs and Commands</a> <li class="menu-list-item "><a href="/syntax/page-variables/" class=menu-list-link >Page Variables</a> </ul> <li class="menu-list-parent "><a href="/styling/templates/" class=menu-list-link >• Styling</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/styling/templates/" class=menu-list-link >Templates</a> <li class="menu-list-item "><a href="/styling/classes/" class=menu-list-link >Classes</a> </ul> <li class="menu-list-parent "><a href="/code/" class=menu-list-link >• Code</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/code/" class=menu-list-link >Inserting code</a> <li class="menu-list-item "><a href="/code/eval-tricks/" class=menu-list-link >Code tricks</a> <li class="menu-list-item "><a href="/code/literate/" class=menu-list-link >Literate.jl</a> </ul> <li class="menu-list-parent "><a href="/extras/" class=menu-list-link >• Extras</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/extras/" class=menu-list-link >Overview</a> <li class="menu-list-item "><a href="/extras/lunr/" class=menu-list-link >Lunr search</a> <li class="menu-list-item "><a href="/extras/literate/" class=menu-list-link >Literate</a> <li class="menu-list-item "><a href="/extras/plotly/" class=menu-list-link >Plotly</a> </ul> <li class="menu-list-parent "><a href="/faq/technical/" class=menu-list-link >• FAQ</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/faq/technical/" class=menu-list-link >Technical</a> <li class="menu-list-item "><a href="/faq/troubleshooting/" class=menu-list-link >Troubleshooting</a> <li class="menu-list-item "><a href="/faq/why-o-why/" class=menu-list-link >Meta</a> </ul> </ul> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder="Enter search term" type=text > <input type=submit  value=Search  formaction="/search/index.html"> </form> </div> <div class=footer > <a href="/faq/why-o-why/"><img style="width:40%;padding-left:10px;margin-bottom:15px;" src="/assets/infra/logoF2.svg" alt="Franklin Logo" /></a> </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a name=pagetop ></a> <a id=github  href="https://github.com/tlienart/Franklin.jl">GitHub Repository</a> </div> <div class=franklin-content > <h1 id=deploying_your_website ><a href="#deploying_your_website">Deploying your website</a></h1> <span style="font-size:24px;font-weight:300;">Set it up once then don't think about it.</span> <div class=blank ></div> <div class=franklin-toc ><ol><li><a href="#deploying_on_github">Deploying on GitHub</a><ol><li><a href="#creating_a_repo_on_github">Creating a repo on GitHub</a><li><a href="#adding_access_tokens">Adding access tokens</a><li><a href="#synchronise_your_local_folder_userorg_website">Synchronise your local folder &#91;User/Org website&#93;</a><li><a href="#synchronise_your_local_folder_project_website">Synchronise your local folder &#91;Project website&#93;</a><li><a href="#troubleshooting">Troubleshooting</a></ol><li><a href="#deploying_on_gitlab">Deploying on GitLab</a><ol><li><a href="#creating_a_repo_on_gitlab">Creating a repo on GitLab</a><li><a href="#synchronise_your_local_folder">Synchronise your local folder</a></ol><li><a href="#deploying_on_netlify">Deploying on Netlify</a></ol></div> <div class=blank ></div> <p>Deploying the website is trivial on Gitlab and services like Netlify. On GitHub there are a few extra steps <strong>especially if you want a user/org website</strong>.</p> <div class=note ><div class=title >⚠ Note</div> <div class=content >If you have an existing website that predates Franklin 0.6, you will want to copy either <a href="https://github.com/tlienart/foosite4/blob/master/.github/workflows/deploy.yml">this GitHub action</a> or <a href="https://gitlab.com/tlienart/foo/-/blob/master/.gitlab-ci.yml">this GitLab CI</a> to your website folder.</div></div> <h2 id=deploying_on_github ><a href="#deploying_on_github">Deploying on GitHub</a></h2> <p><strong>Warning</strong>: the setup to synchronise your local folder and the remote repository is <em>different</em> based on whether you want a user/org website &#40;base URL looking like <code>username.github.io</code>&#41; or a project website &#40;base URL looking like <code>username.github.io/project/</code>&#41;. Make sure to follow the appropriate instructions&#33;</p> <h3 id=creating_a_repo_on_github ><a href="#creating_a_repo_on_github">Creating a repo on GitHub</a></h3> <p>Start by creating an empty GitHub repository</p> <div class=tlist ><ul> <li><p>for a personal &#40;or org&#41; website the repository <strong>must</strong> be named <code>username.github.io</code> &#40;or <code>orgname.github.io</code>&#41; see also <a href="https://pages.github.com/">the github pages docs</a>,</p> <li><p>for a project website the repo can be named anything you want.</p> </ul> </div> <h3 id=adding_access_tokens ><a href="#adding_access_tokens">Adding access tokens</a></h3> <p>In order for the deployment action to work on GitHub, you need to set up an access token on GitHub. The steps are explained below but you <a href="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line">can read more on the topic here</a>.</p> <p>There are two steps: first you need to create the token, then you need to tell your repo to use it.</p> <p><strong>STEP 1</strong>:</p> <div class=tlist ><ol> <li><p>Go to the <a href="https://github.com/settings/tokens">tokens generation page</a> in your <em>Settings &gt; Developper settings &gt; Personal access tokens</em> and click on <em>Generate new token</em>.</p> <li><p>Name the token <code>FRANKLIN</code> and toggle the <code>repo</code> scope; then scroll to the bottom and click on <strong>Generate token</strong>.</p> <li><p>Click on the button to copy the key:</p> </ol> </div> <p><img src="/assets/img/generate_token.png" alt="" /></p> <div class=note ><div class=title >⚠ Note</div> <div class=content >You may want to save that key somewhere safe as you will need it again if you create another Franklin repo and there will be no way of getting it again from GitHub.</div></div> <p><strong>STEP 2</strong>:</p> <div class=tlist ><ul> <li><p>Go to the repository and select <em>Settings &gt; Secrets</em> then click on <strong>Add new secret</strong>,</p> <li><p>Name the secret <code>FRANKLIN</code> and copy the key from the previous step. <em>Make sure that no whitespace is introduced before or after the key</em>.</p> </ul> </div> <p><img src="/assets/img/add_secret.png" alt="" /></p> <h3 id=synchronise_your_local_folder_userorg_website ><a href="#synchronise_your_local_folder_userorg_website">Synchronise your local folder &#91;User/Org website&#93;</a></h3> <p>Now you need to synchronise your repository and your local website folder; to do so, go to your terminal, <code>cd</code> to the website folder and follow the steps below:</p> <div class=tlist ><ul> <li><p><code>git init &amp;&amp; git remote add origin URL_TO_YOUR_REPO</code></p> <li><p><code>git checkout -b dev</code></p> <li><p><code>git add -A &amp;&amp; git commit -am &quot;initial files&quot;</code></p> </ul> </div> <p>It is <strong>crucial</strong> to change branch to <code>dev</code> &#40;or any other name that you like that is not <code>master</code>&#41;. This is because a user/org site <strong>must</strong> be deployed from the <code>master</code> branch.</p> <p>Now, in an editor, open the file <code>.github/workflows/deploy.yml</code> and change the <code>on</code> section to</p> <pre><code class=language-yaml >on:
  push:
    branches:
      - dev</code></pre> <p>change also the <code>BRANCH</code> line at the end to <code>BRANCH: master</code>:</p> <pre><code class=language-yaml >BRANCH: master
FOLDER: __site</code></pre> <p>With all this, if you push changes to <code>dev</code>, the GitHub action will be triggered and deploy the content of the <code>__site</code> folder to the <code>master</code> branch. GitHub pages will then deploy the website from the master branch.</p> <div class=note ><div class=title >⚠ Note</div> <div class=content >It takes a couple of minutes for the whole process to complete and your site to be available online.</div></div> <h3 id=synchronise_your_local_folder_project_website ><a href="#synchronise_your_local_folder_project_website">Synchronise your local folder &#91;Project website&#93;</a></h3> <p>Now you need to synchronise your repository and your local website folder; to do so, go to your terminal, <code>cd</code> to the website folder and follow the steps below:</p> <div class=tlist ><ul> <li><p><code>git init &amp;&amp; git remote add origin URL_TO_YOUR_REPO</code></p> <li><p><code>git add -A &amp;&amp; git commit -am &quot;initial files&quot;</code></p> </ul> </div> <p>That&#39;s it&#33; when you push your updates to the <code>master</code> branch, the GitHub action will deploy the <code>__site</code> folder to a <code>gh-pages</code> branch that GitHub Pages will then use to deploy your website.</p> <div class=note ><div class=title >⚠ Note</div> <div class=content >It takes a couple of minutes for the whole process to complete and your site to be available online.</div></div> <h3 id=troubleshooting ><a href="#troubleshooting">Troubleshooting</a></h3> <div class=tlist ><ul> <li><p>Make sure you have set the access tokens properly,</p> <li><p>Make sure GitHub Pages is pointing at the right branch &#40;see screenshot below&#41;,</p> <li><p>Open an issue on Franklin&#39;s GitHub or ask on the <strong>#franklin</strong> juliaslack channel.</p> </ul> </div> <p><img src="/assets/img/deploy_branch.png" alt="" /></p> <h2 id=deploying_on_gitlab ><a href="#deploying_on_gitlab">Deploying on GitLab</a></h2> <h3 id=creating_a_repo_on_gitlab ><a href="#creating_a_repo_on_gitlab">Creating a repo on GitLab</a></h3> <p>Start by creating an empty GitLab repository</p> <div class=tlist ><ul> <li><p>for a personal website the repository <strong>must</strong> be named <code>username.gitlab.io</code> see also <a href="https://about.gitlab.com/stages-devops-lifecycle/pages/">the gitlab pages docs</a>,</p> <li><p>for a project website the repo can be named anything you want.</p> </ul> </div> <h3 id=synchronise_your_local_folder ><a href="#synchronise_your_local_folder">Synchronise your local folder</a></h3> <p>Now you need to synchronise your repository and your local website folder; to do so, go to your terminal, <code>cd</code> to the website folder and follow the steps below:</p> <div class=tlist ><ul> <li><p><code>git init &amp;&amp; git remote add origin URL_TO_YOUR_REPO</code></p> <li><p><code>git add -A &amp;&amp; git commit -am &quot;initial files&quot;</code></p> </ul> </div> <p>That&#39;s it&#33; when you push your updates to the <code>master</code> branch, the GitLab CI will copy the <code>__site</code> folder to a virtual <code>public</code> folder and deploy its content.</p> <div class=note ><div class=title >⚠ Note</div> <div class=content >It takes a couple of minutes for the whole process to complete and your site to be available online.</div></div> <h2 id=deploying_on_netlify ><a href="#deploying_on_netlify">Deploying on Netlify</a></h2> <p>Synchronise your local website folder with a repository &#40;e.g. a GitHub or GitLab repository&#41; then select that repository on Netlify and indicate you want to deploy the <code>__site</code> folder.</p> <p>That&#39;s it&#33; <div class=page-foot > <div class=copyright > &copy; Thibaut Lienart. Last modified: February 25, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>. </div> </div> </div> </div> </div> </div> <!-- end of class page-wrap--> <script src="/libs/highlight/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: ' '});</script>