<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/JuDocWeb/libs/highlight/github.min.css"> <link rel=stylesheet  href="/JuDocWeb/css/jtd.css"> <link rel=icon  href="/JuDocWeb/assets/infra/favicon2.gif"> <title></title> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/JuDocWeb/" class=title > <img style="height:60px;" src="/JuDocWeb/assets/infra/judoc.svg" alt=judoc  /> <style> @media (max-width: 31.25rem){ .side-bar .show-menu {height:30px;} } @media (max-width: 50rem) { .side-bar .header .title {padding-top:0; padding-bottom: 0;} .header .title img {height:60px; max-width: 100px !important;} } @media (min-width: 66.5rem){ .header .title img {max-width: 120px !important;} } </style> </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item "><a href="/JuDocWeb/" class=menu-list-link >• Home</a> <li class="menu-list-item "><a href="/JuDocWeb/pub/workflow.html" class=menu-list-link >• Workflow</a> <li class="menu-list-parent "><a href="/JuDocWeb/pub/syntax/markdown.html">• Syntax</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/JuDocWeb/pub/syntax/markdown.html" class=menu-list-link >Markdown</a> <li class="menu-list-item "><a href="/JuDocWeb/pub/syntax/divs-commands.html" class=menu-list-link >Divs and Commands</a> <li class="menu-list-item "><a href="/JuDocWeb/pub/syntax/page-variables.html" class=menu-list-link >Page Variables</a> <li class="menu-list-item "><a href="/JuDocWeb/pub/syntax/pre-defined-commands.html" class=menu-list-link >Base Commands</a> </ul> <li class="menu-list-parent active"><a href="/JuDocWeb/pub/code/inserting-code.html">• Code</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/JuDocWeb/pub/code/inserting-code.html" class=menu-list-link >Inserting code</a> <li class="menu-list-item active"><a href="/JuDocWeb/pub/code/eval-tricks.html" class=menu-list-link >Code tricks</a> <li class="menu-list-item "><a href="/JuDocWeb/pub/code/literate.html" class=menu-list-link >Literate.jl</a> </ul> <li class="menu-list-item "><a href="/JuDocWeb/pub/why-o-why.html" class="menu-list-link ">• FAQ</a> <!-- <li class="menu-list-item {{ispage pub/menu3}}active{{end}}"><a href="/JuDocWeb/pub/menu3.html" class="menu-list-link {{ispage pub/menu3}}active{{end}}">Menu 3</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="#" class=menu-list-link >Submenu</a> </ul> --> </ul> </div> <div class=footer > <a href="/JuDocWeb/pub/why-o-why.html"><img style="width:60%;padding-left:10px;margin-bottom:15px;" src="/JuDocWeb/assets/infra/logo1.svg" alt="JuDoc Logo" /></a> </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a name=pagetop ></a> <a id=github  href="/JuDocWeb//github.com/tlienart/JuDoc.jl">GitHub Repo</a> </div> <div class=jd-content > <h1 id=tricks_with_code_evaluation ><a href="/JuDocWeb/pub/code/eval-tricks.html#tricks_with_code_evaluation">Tricks with code evaluation</a></h1> <span style="font-size:24px;font-weight:300;">JuDoc's recursive nature coupled with code evaluation allows for neat and useful tricks.</span> <div class=blank ></div> <div class=jd-toc ><ol><li><a href="/JuDocWeb/pub/code/eval-tricks.html#examples">Examples</a><ol><li><a href="/JuDocWeb/pub/code/eval-tricks.html#generating_a_table">Generating a table</a><li><a href="/JuDocWeb/pub/code/eval-tricks.html#team_cards">Team cards</a><li><a href="/JuDocWeb/pub/code/eval-tricks.html#colourful_circles">Colourful circles</a></ol></ol></div> <h2 id=examples ><a href="/JuDocWeb/pub/code/eval-tricks.html#examples">Examples</a></h2> <p>The basic idea is to exploit the fact that the output of a Julia code block evaluated by JuDoc can be re-processed as JuDoc Markdow when using the <code>\textoutput</code> command; this offers a wide range of possibilities best shown through a few examples.</p> <h3 id=generating_a_table ><a href="/JuDocWeb/pub/code/eval-tricks.html#generating_a_table">Generating a table</a></h3> <table><tr><th>Name<th>Number<tr><td>Bob<td>1525<tr><td>Alice<td>5134<tr><td>Maria<td>4214<tr><td>Arvind<td>9019<tr><td>Jose<td>8918<tr><td>Minjie<td>5757</table> <p>That can be obtained with:</p> <pre><code class="plaintext hljs">```julia:table
#hideall
names = (:Bob, :Alice, :Maria, :Arvind, :Jose, :Minjie)
numbers = (1525, 5134, 4214, 9019, 8918, 5757)
println("Name | Number")
println("--- | ---")
println.("$name | $number" for (name, number) in zip(names, numbers))
```

\textoutput{table}</code></pre> <p>The code block will be executed and not shown &#40;<code>#hideall</code>&#41; generating a table line by line. In practice, the code generates the markdown</p> <pre><code class="markdown hljs">Name | Number
--- | ---
Bob | 1525
...
Minjie | 5757</code></pre> <p>which is captured and reprocessed by the <code>\textoutput</code> command.</p> <h3 id=team_cards ><a href="/JuDocWeb/pub/code/eval-tricks.html#team_cards">Team cards</a></h3> <h3 id=colourful_circles ><a href="/JuDocWeb/pub/code/eval-tricks.html#colourful_circles">Colourful circles</a></h3> <p>The trick can be used to generate SVG code too:</p> <div class=colors ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" pink"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" lightpink"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" hotpink"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" deeppink"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" mediumvioletred"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" palevioletred"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" coral"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" tomato"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" orangered"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" darkorange"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" orange"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" gold"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 4"><circle cx=2  cy=2  r=1.5  fill=" yellow"/></svg></div> <p>That can obtained with &#40;see detailed explanations further below&#41;</p> <pre><code class="plaintext hljs">\newcommand&amp;#123;\circle&amp;#125;&amp;#91;1&amp;#93;&amp;#123;
  ~~~
  &amp;lt;svg xmlns&amp;#61;&amp;quot;http://www.w3.org/2000/svg&amp;quot; viewBox&amp;#61;&amp;quot;0 0 4 4&amp;quot;&amp;gt;
  &amp;lt;circle cx&amp;#61;&amp;quot;2&amp;quot; cy&amp;#61;&amp;quot;2&amp;quot; r&amp;#61;&amp;quot;1.5&amp;quot; fill&amp;#61;&amp;quot;#1&amp;quot;/&amp;gt;&amp;lt;/svg&amp;gt;
  ~~~
  &amp;#125;</code></pre> <p>The first part defines a command <code>\circle</code> which takes one argument for the fill colour and inserts SVG code for a circle with that colour.</p> <p>The second part is a Julia code block which will be evaluated but not displayed on the page &#40;since there is a <code>#hideall</code>&#41;. The code loops over the each colour <code>c</code> and prints <code>\circle&#123;c&#125;</code> so that the code block effectively generates:</p> <pre><code class="plaintext hljs">@@colors \circle{pink}...\circle{yellow}@@</code></pre>
<p>this output is then captured and reprocessed with the <code>\textoutput&#123;snippet&#125;</code> command.</p>
<p>The last thing to do is to style the <code>colors</code> div appropriately:</p>
<pre><code class="css hljs"><span class=hljs-selector-class >.colors</span> {
  <span class=hljs-attribute >margin-top</span>:<span class=hljs-number >1.5em</span>;
  <span class=hljs-attribute >margin-bottom</span>:<span class=hljs-number >1.5em</span>;
  <span class=hljs-attribute >margin-left</span>:auto;
  <span class=hljs-attribute >margin-right</span>:auto;
  <span class=hljs-attribute >width</span>: <span class=hljs-number >60%</span>;
  <span class=hljs-attribute >text-align</span>: center;}
<span class=hljs-selector-class >.colors</span> <span class=hljs-selector-tag >svg</span> {
  <span class=hljs-attribute >width</span>:<span class=hljs-number >30px</span>;}</code></pre>
<div class=page-foot >
  <div class=copyright >
    &copy; Thibaut Lienart. Last modified: November 04, 2019. Website built with <a href="https://github.com/tlienart/JuDoc.jl">JuDoc.jl</a>.
  </div>
</div>

</div>

    </div> 
    </div> 
    </div> <!-- end of class page-wrap-->